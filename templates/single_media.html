{% extends 'inc/dashboard_base.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_messages %}
{% bootstrap_javascript %}
{% block title %}Dashboard{% endblock title %}
{% block content %}

{% include 'inc/msgs.inc.html' %}

<div class="px-3 my-5">
    <p class="text-secondary d-flex align-items-center course-navigation" style="font-size: 20px;">
        <a href="{% url 'all_modules' training.id  %}">
            {{ training }}
        </a>

        <i class="material-icons mx-2 link-arrow">keyboard_arrow_right</i>

        <a href="{% url 'media' training.id module.id %}">
            {{ module }}
        </a>

        {% if media %}
            <i class="material-icons mx-2 link-arrow">keyboard_arrow_right</i>

            <a href="{% url 'single_media' training.id module.id module.id %}">
                {{ module }}
            </a>

        {% endif %}
    </p>
</div>

<div class="container">
    <div class="row mb-4">
        <div class="col-sm-8">
            {% if not media  %}
            <div class="card">
                <div class="card-body text-center d-flex align-items-center justify-content-center"
                    style="height: 300px;">
                    <div>
                        <img src="{% static 'img/notfound.png' %}" style="width: 150px;" alt="">
                        <h4 class="text-secondary display-3 mt-3" style="font-size: 25px;">No media is selected to play</h4>
                    </div>
                </div>
            </div>
            {% else %}

            <div class="card">
                <iframe style="width: 100%; height: 25rem; border-radius: 4px 4px 0px 0px;" src="{{ media.file }}"></iframe>
                <div class="card-body">
                    <div class="row my-3">
                        <div class="col-sm-9">
                            <div>
                                <h4 class="card-title py-0">{{ media.name }}</h4>
                                <p class="mt-2 theme-secondary-text mb-0">{{ media.created_at }}</p>
                            </div>
                        </div>
                        <div class="col-sm-3 d-flex align-items-center justify-content-end">
                            <button type="button" class="btn theme-primary-btn">Mark as done</button>
                        </div>
                    </div>
                    <div>
                        <p class="card-text">{{ media.description }}</p>
                    </div>
                </div>
            </div>

            {% endif %}

            
        </div>

        <div class="col-sm-4">
            <div class="card py-3 mb-4">
                <div class="px-3 pb-2 mb-2">
                    <h6 class="text-secondary">Module</h6>
                    <h5>{{ module }}</h5>
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center">
                            <label class="switch" title="Autoplay">
                                <input type="checkbox">
                                <span class="slider round"></span>
                            </label>
                            
                        </div>
                        <div>
                            <a href="" onclick="return false;">
                                <img src="{% static 'img/full-screen-icon.png' %}" alt="full-screen-icon" class="img-fluid"
                                    style="width: 20px;">
                            </a>
                        </div>
                    </div>
                </div>

                {% for current_media in medias %}

                
                <div class="videos-parent {% if current_media.id == media.id %}selected-video{% else %}my-video{% endif %}">
                    
                    <a href="{% url 'single_media' training.id module.id current_media.id %}" class="text-decoration-none">
                        <div class="d-flex align-items-center p-1">
                            <div class="mx-0" style="width: 7%;">
                                <i class="material-icons {% if current_media.id == media.id %}theme-primary-text{% else %}text-white{% endif %} mx-0" style="font-size: 30px;">arrow_right</i>
                            </div>
                            <div style="width: 31%;">
                                <img src="media/{{ current_media.thumbnail }}" class="img-fluid" alt="video-thumbnail"
                                    style="width: 8rem;">
                            </div>
                            <div style="width: 62%;" class="px-2">
                                <p class="m-0 p-0 text-dark d-flex align-items-center">
                                    {{ current_media.name }} <i class="material-icons text-success mx-2">check_circle</i>
                                </p>
                            </div>
                        </div>
                    </a>
                
                </div>
                {% endfor %}
            </div>

            {% if training %}
            <div class="card">
                <div class="card-header bg-white ">
                    <h4 class="my-2 py-0">{{ training.name }}</h4>
                </div>
                <img src="media/{{ training.thumbnail }}" class="card-img-top" alt="...">
                <div class="card-body">
                    <!-- <h4 class="card-title">{{ training.name }}</h4> -->
                    <div>
                        <p class="card-text">{{ training.description }}</p>
                    </div>
                </div>
            </div>
            {% else %}

            <div class="card">
                <div class="card-body text-center d-flex align-items-center justify-content-center"
                    style="height: 300px;">
                    <div>
                        <img src="{% static 'img/notfound.png' %}" style="width: 150px;" alt="">
                        <h4 class="text-secondary display-3 mt-3" style="font-size: 25px;">No training selected</h4>
                    </div>
                </div>
            </div>





            {% endif %}
        </div>
    </div>



</div>

{% endblock content %}